/* --- RESET --- */
* { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; } /* SCROLL SUAVE */

body {
    background-color: #050011; 
    background: linear-gradient(to bottom, #1a0b2e 0%, #000000 100%);
    color: #E0E0E0;
    font-family: 'VT323', monospace;
    font-size: 22px;
    padding: 20px;
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
}

/* FONDOS */
.retro-background { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
.synthwave-grid {
    position: absolute; width: 100%; height: 100%; left: 0; top: 0;
    background-image: linear-gradient(rgba(157, 78, 221, 0.15) 1px, transparent 1px), linear-gradient(90deg, rgba(157, 78, 221, 0.15) 1px, transparent 1px);
    background-size: 40px 40px;
}
.scanlines {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: repeating-linear-gradient(to bottom, transparent 0px, transparent 2px, rgba(0,0,0,0.2) 3px);
    pointer-events: none; z-index: 999;
}

/* TIPOGRAFIA */
h1, h2, h3, .player-name, .goal-text, .badge, .status-badge, .month-separator {
    font-family: 'Press Start 2P', cursive;
    text-transform: uppercase;
}

/* LOGO */
.header-logo-area { text-align: center; margin-bottom: 20px; }
.game-logo { max-width: 500px; width: 90%; filter: drop-shadow(0 0 15px rgba(189, 0, 255, 0.6)); }

/* CONTENEDOR */
.main-container { max-width: 800px; margin: 0 auto; position: relative; z-index: 10; }

/* PANELES */
.glass-panel, .phase-card {
    background: rgba(10, 5, 20, 0.9); 
    border: 2px solid rgba(157, 78, 221, 0.5);
    box-shadow: 0 0 15px rgba(157, 78, 221, 0.2);
}

/* HUD */
.hud-panel { padding: 20px; margin-bottom: 30px; border-color: #e0aaff; }
.hud-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap; }
.player-name { color: #e0aaff; text-shadow: 0 0 5px #e0aaff; font-size: 14px; }
.goal-text { color: #ff9e00; text-shadow: 0 0 5px #ff9e00; font-size: 14px; }
.deadline-text { color: #ff0054; text-shadow: 0 0 10px #ff0054; font-size: 18px; }

/* BARRAS DE PROGRESO (CON TRANSICIÓN) */
.progress-bar-container {
    flex-grow: 1; height: 30px; background: #10002b; border: 2px solid #5a189a;
    margin: 0 15px; position: relative; overflow: hidden;
}
.progress-fill {
    height: 100%; 
    transition: width 1s ease-out; /* MOVIMIENTO SUAVE */
    background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
    background-size: 40px 40px;
    animation: moveStripes 2s linear infinite;
}
@keyframes moveStripes { 0% { background-position: 0 0; } 100% { background-position: 40px 0; } }
.gold-fill { background-color: #ff9e00; box-shadow: 0 0 15px #ff9e00; }

/* BADGES (NUEVO ESTILO PARA IMÁGENES) */
.badges-panel { display: flex; justify-content: center; gap: 15px; margin-bottom: 30px; flex-wrap: wrap; }
.badge-link { text-decoration: none; transition: transform 0.2s; }
.badge-link:hover { transform: translateY(-5px); }

.badge {
    background: rgba(0,0,0,0.5); 
    border: 2px solid #555; /* Borde gris por defecto */
    width: 80px; height: 80px; 
    display: flex; align-items: center; justify-content: center;
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.3s;
}

.badge-img {
    width: 70%; 
    height: auto; 
    opacity: 0.5; /* Opaco si no está desbloqueado */
    filter: grayscale(100%);
    transition: all 0.3s;
}

/* ESTADO DESBLOQUEADO */
.badge.unlocked {
    background: rgba(255, 255, 255, 0.1);
    transform: scale(1.05);
}
.badge.unlocked .badge-img {
    opacity: 1;
    filter: grayscale(0%);
    filter: drop-shadow(0 0 5px rgba(255,255,255,0.5));
}

/* TARJETAS DE NIVEL */
.phase-card { margin-bottom: 40px; padding: 20px; position: relative; scroll-margin-top: 20px; }
.phase-header { border-bottom: 2px dashed #5a189a; margin-bottom: 15px; padding-bottom: 10px; }
.phase-title { font-size: 20px; margin-bottom: 10px; color: #fff; line-height: 1.4; }

/* INFO BOX */
.level-meta-box {
    background: rgba(255, 255, 255, 0.05);
    padding: 15px;
    border-radius: 5px;
    margin-bottom: 15px;
    font-size: 18px;
    color: #ddd;
    border-left: 4px solid #5a189a;
}
.level-meta-box p { margin-bottom: 8px; }
.level-meta-box strong { color: #e0aaff; }

/* FECHAS */
.date-row { display: flex; justify-content: space-between; align-items: center; width: 100%; font-size: 14px; margin-bottom: 5px; color: #aaa; }
.status-badge {
    font-size: 12px; padding: 5px 10px; border-radius: 4px; display: inline-block; margin-left: 10px;
    animation: blinkBadge 1.5s infinite;
}
.active-phase-badge { background: #00FF00; color: #000; box-shadow: 0 0 10px #00FF00; }
@keyframes blinkBadge { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }

/* SEPARADOR MESES */
.month-separator {
    font-size: 18px;
    margin: 30px 0 15px 0;
    padding-bottom: 5px;
    border-bottom: 2px solid;
    opacity: 0.8;
    letter-spacing: 2px;
}

/* TAREAS */
.task-item {
    display: flex; align-items: flex-start; padding: 15px; margin-bottom: 10px;
    background: rgba(255,255,255,0.05); cursor: pointer; border: 1px solid transparent; transition: 0.2s;
}
.task-item:hover { background: rgba(157, 78, 221, 0.3); border-color: #e0aaff; }

.pixel-checkbox {
    width: 24px; height: 24px; border: 2px solid #9d4edd; margin-right: 15px; flex-shrink: 0;
    display: flex; align-items: center; justify-content: center;
}
.pixel-checkbox.checked { background: #00ff00; border-color: #00ff00; box-shadow: 0 0 10px #00ff00; }
.pixel-checkbox.checked::after { content: '✔'; color: #000; font-size: 14px; }

.task-content { flex-grow: 1; }
.task-content h4 { font-size: 22px; margin-bottom: 10px; color: #fff; transition: 0.3s; }

/* INSTRUCCION Y OBJETIVO */
.task-details p { font-size: 18px; color: #e0aaff; font-family: sans-serif; opacity: 0.9; margin-bottom: 8px; line-height: 1.4; }
.task-details strong { color: #fff; }
.task-objective { color: #aaa; font-style: italic; font-size: 16px !important;}

/* COMPLETADO */
.task-item.done-task .task-content h4 { text-decoration: line-through; color: #555; }
.task-item.done-task .task-details p { text-decoration: line-through; opacity: 0.3; color: #555; }

.phase-card.completed { opacity: 0.5; filter: grayscale(80%); border-color: #333 !important; }
.mission-complete-stamp {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-10deg);
    border: 4px solid #00ff00; padding: 10px 20px; font-family: 'Press Start 2P'; color: #00ff00;
    background: #000; z-index: 20; display: none; box-shadow: 0 0 20px #00ff00; text-align: center;
}
.phase-card.completed .mission-complete-stamp { display: block; }

/* CELULAR */
@media (max-width: 768px) {
    body { font-size: 26px !important; }
    .game-logo { width: 100%; }
    .phase-title { font-size: 30px !important; text-align: center; margin-bottom: 20px; }
    
    .level-meta-box { font-size: 22px; padding: 20px; }
    .month-separator { font-size: 26px; margin-top: 40px; }

    .task-item { padding: 25px 15px; margin-bottom: 20px; }
    .task-content h4 { font-size: 32px !important; margin-bottom: 15px; line-height: 1.2; }
    
    .task-details p { font-size: 24px !important; line-height: 1.5; margin-bottom: 15px; }
    
    .pixel-checkbox { width: 50px; height: 50px; margin-right: 25px; border-width: 4px; }
    .pixel-checkbox.checked::after { font-size: 35px; }
    
    .hud-row { flex-direction: column; gap: 15px; text-align: center; }
    .progress-bar-container { width: 100%; height: 50px; }
    .player-name, .goal-text { font-size: 22px; width: 100%; }
    .deadline-text { font-size: 26px; color: #ff3333; }
    .date-row { flex-direction: column; gap: 5px; font-size: 22px; }
}
